<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FileSizeTree.Controls"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <ResourceDictionary.MergedDictionaries>
        <!-- Material Design -->
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Dark.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.DeepPurple.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Accent/MaterialDesignColor.Lime.xaml" />
        
    </ResourceDictionary.MergedDictionaries>

    <ControlTemplate x:Key="ShellWindowTemplate" TargetType="{x:Type controls:ShellWindow}">
        <Grid>
            <GroupBox
                Style="{DynamicResource MaterialDesignGroupBox}"
                Background="{StaticResource MaterialDesignDarkBackground}"
                Foreground="{StaticResource MaterialDesignDarkForeground}"
                Padding="8"
                BorderThickness="2">
                <GroupBox.Header>
                    <DockPanel
                        x:Name="PART_DragMoveElement"
                        LastChildFill="True"
                        HorizontalAlignment="Stretch">
                        <Button x:Name="PART_BtnIcon"
                            Command="{TemplateBinding IconButtonCommand}"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="{StaticResource MaterialDesignDarkForeground}">
                            <materialDesign:PackIcon
                                Kind="FolderOutline"
                                Height="32"
                                Width="32"
                                VerticalAlignment="Center"
                                DockPanel.Dock="Left" />
                        </Button>
                        <Button x:Name="PART_BtnClose"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                            DockPanel.Dock="Right">
                            <materialDesign:PackIcon
                                Kind="WindowClose"
                                Height="24"
                                Width="24"
                                VerticalAlignment="Center" />
                        </Button>
                        <Button x:Name="PART_BtnMaximize"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                            DockPanel.Dock="Right">
                            <materialDesign:PackIcon
                                Kind="WindowMaximize"
                                Height="24"
                                Width="24"
                                VerticalAlignment="Center" />
                        </Button>
                        <Button x:Name="PART_BtnMinimize"
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                            DockPanel.Dock="Right">
                            <materialDesign:PackIcon
                                Kind="WindowMinimize"
                                Height="24"
                                Width="24"
                                VerticalAlignment="Bottom" />
                        </Button>
                        <TextBlock 
                            Text="{TemplateBinding Title}" 
                            Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                            VerticalAlignment="Center" 
                            Margin="16,0,0,0"/>
                    </DockPanel>
                </GroupBox.Header>
                <Grid>
                    <ContentPresenter />
                    <controls:BusyIndicator
                        x:Name="PART_BusyIndicator"/>
                </Grid>
            </GroupBox>
        </Grid>
    </ControlTemplate>

    <Style TargetType="{x:Type controls:ShellWindow}">
        <Setter Property="WindowStyle" Value="None"/>
        <Setter Property="ResizeMode" Value="CanResize"/>
        <Setter Property="Template" Value="{StaticResource ShellWindowTemplate}"/>
    </Style>
</ResourceDictionary>