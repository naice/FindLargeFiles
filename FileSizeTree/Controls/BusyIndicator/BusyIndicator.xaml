<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FileSizeTree.Controls"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                    xmlns:convert="clr-namespace:FileSizeTree.ValueConverter">

    <ResourceDictionary.MergedDictionaries>
        <!-- Material Design -->
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Dark.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.DeepPurple.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Accent/MaterialDesignColor.Lime.xaml" />

    </ResourceDictionary.MergedDictionaries>

    <SolidColorBrush x:Key="TranslucentDarkBackground" Color="#FF303030" Opacity="0.75" />
    <convert:ToVisibilityConverter x:Key="ToVisibilityConverter" IsCollapsed="True" IsInverted="False" />

    <ControlTemplate
        x:Key="BusyIndicatorTemplate"
        TargetType="{x:Type controls:BusyIndicator}">
        <Grid 
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Background="{StaticResource TranslucentDarkBackground}"
            Visibility="{TemplateBinding IsBusy, Converter={StaticResource ToVisibilityConverter}}">
            <materialDesign:Card
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                UniformCornerRadius="65"
                Padding="4">
                <Grid>
                    <ProgressBar
                        Width="128"
                        Height="128"
                        Style="{StaticResource MaterialDesignCircularProgressBar}"
                        Value="50"
                        IsIndeterminate="True" />
                    <materialDesign:PackIcon
                        Kind="Hourglass"
                        Height="32"
                        Width="32"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center" />
                </Grid>
            </materialDesign:Card>
        </Grid>
    </ControlTemplate>

    <Style TargetType="{x:Type controls:BusyIndicator}">
        <Style.Setters>
            <Setter Property="Template" Value="{StaticResource BusyIndicatorTemplate}" />
        </Style.Setters> 
    </Style>
    
</ResourceDictionary>